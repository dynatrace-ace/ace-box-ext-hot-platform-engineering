{
    "version": "6",
    "defaultTimeframe": {
        "from": "now()-1h",
        "to": "now()"
    },
    "defaultSegments": [],
    "sections": [
        {
            "id": "aecaabdc-e088-4e4f-bdbf-554ebff6dd06",
            "type": "dql",
            "title": "pod availability",
            "filterSegments": [],
            "drilldownPath": [],
            "previousFilterSegments": [],
            "height": 218,
            "state": {
                "input": {
                    "value": "timeseries {desired = avg(dt.kubernetes.workload.pods_desired), active = avg(dt.kubernetes.pods)}, by: {dt.entity.cloud_application}\n| fieldsAdd labels = entityAttr(dt.entity.cloud_application,\"cloudApplicationLabels\")\n| fieldsAdd component = labels[`backstage.io/component`]\n| filter component == \"default.$proj_name-$owner-$stage\"\n| fieldsAdd sli = (active[]/desired[]) * 100\n| summarize sli = avg(arrayAvg(sli))",
                    "timeframe": {
                        "from": "now()-2h",
                        "to": "now()"
                    }
                },
                "visualization": "singleValue",
                "querySettings": {
                    "maxResultRecords": 1000,
                    "defaultScanLimitGbytes": 500,
                    "maxResultMegaBytes": 1,
                    "defaultSamplingRatio": 10,
                    "enableSampling": false
                },
                "result": {
                    "code": 200,
                    "value": {
                        "records": [
                            {
                                "sli": 100
                            }
                        ],
                        "metadata": {
                            "grail": {
                                "canonicalQuery": "timeseries by:{dt.entity.cloud_application}, {desired = avg(dt.kubernetes.workload.pods_desired), active = avg(dt.kubernetes.pods)}\n| fieldsAdd labels = entityAttr(dt.entity.cloud_application, \"cloudApplicationLabels\")\n| fieldsAdd component = labels[`backstage.io/component`]\n| filter component == \"default.simplenodeservice-team01-qa\"\n| fieldsAdd sli = active[] / desired[] * 100\n| summarize sli = avg(arrayAvg(sli))",
                                "timezone": "America/Chicago",
                                "query": "timeseries {desired = avg(dt.kubernetes.workload.pods_desired), active = avg(dt.kubernetes.pods)}, by: {dt.entity.cloud_application}\n| fieldsAdd labels = entityAttr(dt.entity.cloud_application,\"cloudApplicationLabels\")\n| fieldsAdd component = labels[`backstage.io/component`]\n| filter component == \"default.simplenodeservice-team01-qa\"\n| fieldsAdd sli = (active[]/desired[]) * 100\n| summarize sli = avg(arrayAvg(sli))",
                                "scannedRecords": 43,
                                "dqlVersion": "V1_0",
                                "scannedBytes": 0,
                                "scannedDataPoints": 9172,
                                "analysisTimeframe": {
                                    "start": "2024-12-08T23:03:00.000Z",
                                    "end": "2024-12-09T01:04:00.000Z"
                                },
                                "locale": "en-US",
                                "executionTimeMilliseconds": 77,
                                "notifications": [],
                                "queryId": "498b9509-270e-47ef-99b6-488917404e94",
                                "sampled": false
                            },
                            "metrics": [
                                {
                                    "metric.key": "dt.kubernetes.workload.pods_desired",
                                    "displayName": "Kubernetes: Workload - desired pod count",
                                    "description": "This metric measures the number of desired pods. The most detailed level of aggregation is workload. The value corresponds to the 'replicas' defined in a deployment resource and to the 'desiredNumberScheduled' for a daemon set resource's status as examp",
                                    "unit": "Count",
                                    "fieldName": "desired"
                                },
                                {
                                    "metric.key": "dt.kubernetes.pods",
                                    "displayName": "Kubernetes: Pod count",
                                    "description": "This metric measures the number of pods. The most detailed level of aggregation is workload and node. The value corresponds to the count of all pods.",
                                    "unit": "Count",
                                    "fieldName": "active"
                                }
                            ]
                        },
                        "types": [
                            {
                                "mappings": {
                                    "sli": {
                                        "type": "double"
                                    }
                                },
                                "indexRange": [
                                    0,
                                    0
                                ]
                            }
                        ]
                    },
                    "notifications": [],
                    "querySettings": {
                        "maxResultRecords": 1000,
                        "defaultScanLimitGbytes": 500,
                        "maxResultMegaBytes": 1,
                        "defaultSamplingRatio": 10,
                        "enableSampling": false
                    },
                    "dateTime": "2024-12-09T01:03:09.273Z",
                    "input": {
                        "timeframe": {
                            "from": "now()-2h",
                            "to": "now()"
                        },
                        "value": "timeseries {desired = avg(dt.kubernetes.workload.pods_desired), active = avg(dt.kubernetes.pods)}, by: {dt.entity.cloud_application}\n| fieldsAdd labels = entityAttr(dt.entity.cloud_application,\"cloudApplicationLabels\")\n| fieldsAdd component = labels[`backstage.io/component`]\n| filter component == \"default.simplenodeservice-team01-qa\"\n| fieldsAdd sli = (active[]/desired[]) * 100\n| summarize sli = avg(arrayAvg(sli))"
                    }
                },
                "visualizationSettings": {
                    "thresholds": [],
                    "chartSettings": {
                        "gapPolicy": "gap",
                        "circleChartSettings": {
                            "groupingThresholdType": "relative",
                            "groupingThresholdValue": 0,
                            "valueType": "relative"
                        },
                        "categoryOverrides": {},
                        "curve": "linear",
                        "pointsDisplay": "auto",
                        "categoricalBarChartSettings": {
                            "layout": "horizontal",
                            "categoryAxisTickLayout": "horizontal",
                            "scale": "absolute",
                            "groupMode": "stacked",
                            "colorPaletteMode": "multi-color",
                            "categoryAxisLabel": "dt.entity.cloud_application,component",
                            "valueAxisLabel": "interval",
                            "tooltipVariant": "single"
                        },
                        "colorPalette": "categorical",
                        "valueRepresentation": "absolute",
                        "truncationMode": "middle",
                        "xAxisScaling": "analyzedTimeframe",
                        "xAxisLabel": "timeframe",
                        "xAxisIsLabelVisible": false,
                        "hiddenLegendFields": [],
                        "leftYAxisSettings": {
                            "isLabelVisible": true,
                            "label": "Kubernetes: Workload - desired pod count â€¢ Kubernetes: Pod count"
                        }
                    },
                    "singleValue": {
                        "showLabel": true,
                        "label": "sli",
                        "prefixIcon": "",
                        "recordField": "sli",
                        "autoscale": true,
                        "alignment": "center",
                        "trend": {
                            "trendType": "auto",
                            "isVisible": true
                        },
                        "colorThresholdTarget": "value"
                    },
                    "table": {
                        "rowDensity": "condensed",
                        "enableSparklines": false,
                        "hiddenColumns": [],
                        "linewrapEnabled": false,
                        "lineWrapIds": [],
                        "monospacedFontEnabled": false,
                        "monospacedFontColumns": [],
                        "firstVisibleRowIndex": 0,
                        "columnWidths": {},
                        "columnTypeOverrides": []
                    },
                    "honeycomb": {
                        "shape": "hexagon",
                        "legend": {
                            "hidden": false,
                            "position": "auto"
                        },
                        "displayedFields": [],
                        "dataMappings": {},
                        "truncationMode": "middle",
                        "colorMode": "color-palette",
                        "colorPalette": "categorical"
                    },
                    "histogram": {
                        "legend": "auto",
                        "yAxis": {
                            "label": "Frequency",
                            "scale": "linear"
                        },
                        "colorPalette": "categorical",
                        "dataMappings": [
                            {
                                "valueAxis": "sli",
                                "rangeAxis": ""
                            }
                        ],
                        "variant": "single",
                        "truncationMode": "middle",
                        "displayedFields": []
                    },
                    "autoSelectVisualization": false
                },
                "state": "success"
            }
        },
        {
            "id": "6383d15a-ce22-41ce-9caf-bc98c824118b",
            "type": "dql",
            "title": "synthetic availability",
            "filterSegments": [],
            "drilldownPath": [],
            "previousFilterSegments": [],
            "height": 232,
            "state": {
                "input": {
                    "value": "timeseries {\n  total = sum(dt.synthetic.http.executions, default: 0),\n  pass = sum(dt.synthetic.http.executions, default: 0), filter: { matchesValue(http_monitor.result.status, \"HEALTHY\") }\n  },by: { dt.entity.http_check }\n| fieldsAdd name = entityName(dt.entity.http_check)\n| filter name == \"Healthcheck $proj_name-$owner-$stage\"\n| fieldsAdd sli=(((pass[])/total[])*(100))\n| fieldsRemove total, pass\n| summarize sli = avg(arrayAvg(sli))",
                    "timeframe": {
                        "from": "now()-1h",
                        "to": "now()"
                    }
                },
                "visualization": "singleValue",
                "querySettings": {
                    "maxResultRecords": 1000,
                    "defaultScanLimitGbytes": 500,
                    "maxResultMegaBytes": 1,
                    "defaultSamplingRatio": 10,
                    "enableSampling": false
                },
                "result": {
                    "code": 200,
                    "value": {
                        "records": [
                            {
                                "sli": 100
                            }
                        ],
                        "metadata": {
                            "grail": {
                                "canonicalQuery": "timeseries by:{dt.entity.http_check}, filter:matchesValue(http_monitor.result.status, \"HEALTHY\"), {total = sum(dt.synthetic.http.executions, default:0), pass = sum(dt.synthetic.http.executions, default:0)}\n| fieldsAdd name = entityName(dt.entity.http_check)\n| filter name == \"Healthcheck simplenodeservice-team01-qa\"\n| fieldsAdd sli = pass[] / total[] * 100\n| fieldsRemove total, pass\n| summarize sli = avg(arrayAvg(sli))",
                                "timezone": "America/Chicago",
                                "query": "timeseries {\n  total = sum(dt.synthetic.http.executions, default: 0),\n  pass = sum(dt.synthetic.http.executions, default: 0), filter: { matchesValue(http_monitor.result.status, \"HEALTHY\") }\n  },by: { dt.entity.http_check }\n| fieldsAdd name = entityName(dt.entity.http_check)\n| filter name == \"Healthcheck simplenodeservice-team01-qa\"\n| fieldsAdd sli=(((pass[])/total[])*(100))\n| fieldsRemove total, pass\n| summarize sli = avg(arrayAvg(sli))",
                                "scannedRecords": 1,
                                "dqlVersion": "V1_0",
                                "scannedBytes": 0,
                                "scannedDataPoints": 122,
                                "analysisTimeframe": {
                                    "start": "2024-12-09T21:01:00.000Z",
                                    "end": "2024-12-09T22:02:00.000Z"
                                },
                                "locale": "en-US",
                                "executionTimeMilliseconds": 51,
                                "notifications": [],
                                "queryId": "52db8e1f-fb94-414c-838a-e09648f7ce31",
                                "sampled": false
                            },
                            "metrics": [
                                {
                                    "metric.key": "dt.synthetic.http.executions",
                                    "displayName": "Execution count (by status) [HTTP monitor]",
                                    "description": "The number of monitor executions.",
                                    "unit": "count",
                                    "fieldName": "total"
                                },
                                {
                                    "metric.key": "dt.synthetic.http.executions",
                                    "displayName": "Execution count (by status) [HTTP monitor]",
                                    "description": "The number of monitor executions.",
                                    "unit": "count",
                                    "fieldName": "pass"
                                }
                            ]
                        },
                        "types": [
                            {
                                "mappings": {
                                    "sli": {
                                        "type": "double"
                                    }
                                },
                                "indexRange": [
                                    0,
                                    0
                                ]
                            }
                        ]
                    },
                    "notifications": [],
                    "querySettings": {
                        "maxResultRecords": 1000,
                        "defaultScanLimitGbytes": 500,
                        "maxResultMegaBytes": 1,
                        "defaultSamplingRatio": 10,
                        "enableSampling": false
                    },
                    "dateTime": "2024-12-09T22:01:44.240Z",
                    "input": {
                        "timeframe": {
                            "from": "now()-1h",
                            "to": "now()"
                        },
                        "value": "timeseries {\n  total = sum(dt.synthetic.http.executions, default: 0),\n  pass = sum(dt.synthetic.http.executions, default: 0), filter: { matchesValue(http_monitor.result.status, \"HEALTHY\") }\n  },by: { dt.entity.http_check }\n| fieldsAdd name = entityName(dt.entity.http_check)\n| filter name == \"Healthcheck simplenodeservice-team01-qa\"\n| fieldsAdd sli=(((pass[])/total[])*(100))\n| fieldsRemove total, pass\n| summarize sli = avg(arrayAvg(sli))"
                    }
                },
                "visualizationSettings": {
                    "thresholds": [],
                    "chartSettings": {
                        "gapPolicy": "gap",
                        "circleChartSettings": {
                            "groupingThresholdType": "relative",
                            "groupingThresholdValue": 0,
                            "valueType": "relative"
                        },
                        "categoryOverrides": {},
                        "curve": "linear",
                        "pointsDisplay": "auto",
                        "categoricalBarChartSettings": {
                            "layout": "horizontal",
                            "categoryAxisTickLayout": "horizontal",
                            "scale": "absolute",
                            "groupMode": "stacked",
                            "colorPaletteMode": "multi-color",
                            "categoryAxisLabel": "dt.entity.http_check,name",
                            "valueAxisLabel": "interval",
                            "tooltipVariant": "single"
                        },
                        "colorPalette": "categorical",
                        "valueRepresentation": "absolute",
                        "truncationMode": "middle",
                        "xAxisScaling": "analyzedTimeframe",
                        "xAxisLabel": "timeframe",
                        "xAxisIsLabelVisible": false,
                        "hiddenLegendFields": [],
                        "leftYAxisSettings": {
                            "isLabelVisible": true,
                            "label": "Execution count (by status) [HTTP monitor]"
                        }
                    },
                    "singleValue": {
                        "showLabel": true,
                        "label": "sli",
                        "prefixIcon": "",
                        "recordField": "sli",
                        "autoscale": true,
                        "alignment": "center",
                        "trend": {
                            "trendType": "auto",
                            "isVisible": true
                        },
                        "colorThresholdTarget": "value"
                    },
                    "table": {
                        "rowDensity": "condensed",
                        "enableSparklines": false,
                        "hiddenColumns": [],
                        "linewrapEnabled": false,
                        "lineWrapIds": [],
                        "monospacedFontEnabled": false,
                        "monospacedFontColumns": [],
                        "firstVisibleRowIndex": 0,
                        "columnWidths": {},
                        "columnTypeOverrides": []
                    },
                    "honeycomb": {
                        "shape": "hexagon",
                        "legend": {
                            "hidden": false,
                            "position": "auto"
                        },
                        "displayedFields": [],
                        "dataMappings": {},
                        "truncationMode": "middle",
                        "colorMode": "color-palette",
                        "colorPalette": "categorical"
                    },
                    "histogram": {
                        "legend": "auto",
                        "yAxis": {
                            "label": "Frequency",
                            "scale": "linear"
                        },
                        "colorPalette": "categorical",
                        "dataMappings": [
                            {
                                "valueAxis": "sli",
                                "rangeAxis": ""
                            }
                        ],
                        "variant": "single",
                        "truncationMode": "middle",
                        "displayedFields": []
                    },
                    "autoSelectVisualization": false
                },
                "state": "success"
            }
        },
        {
            "id": "3ff28439-51be-4209-aa73-0f60d218e668",
            "type": "dql",
            "title": "service performance",
            "filterSegments": [],
            "drilldownPath": [],
            "previousFilterSegments": [],
            "height": 247,
            "state": {
                "input": {
                    "value": "timeseries total=avg(dt.service.request.response_time, default: 0), by: { dt.entity.service }, filter: { k8s.namespace.name == \"$proj_name-$owner-$stage\" }\n| fieldsAdd high=iCollectArray(if(total[]> (1000 * 500), total[]))\n| fieldsAdd low=iCollectArray(if(total[]<= (1000 * 500), total[]))\n| fieldsAdd highRespTimes=iCollectArray(if(isNull(high[]),0,else:1))\n| fieldsAdd lowRespTimes=iCollectArray(if(isNull(low[]),0,else:1))\n| fieldsAdd sli=100*(lowRespTimes[]/(lowRespTimes[]+highRespTimes[]))\n| fieldsRemove total, high, low, highRespTimes, lowRespTimes\n| summarize sli = avg(arrayAvg(sli))",
                    "timeframe": {
                        "from": "now()-30m",
                        "to": "now()"
                    }
                },
                "visualization": "singleValue",
                "querySettings": {
                    "maxResultRecords": 1000,
                    "defaultScanLimitGbytes": 500,
                    "maxResultMegaBytes": 1,
                    "defaultSamplingRatio": 10,
                    "enableSampling": false
                },
                "result": {
                    "code": 200,
                    "value": {
                        "records": [
                            {
                                "sli": 100
                            }
                        ],
                        "metadata": {
                            "grail": {
                                "canonicalQuery": "timeseries by:{dt.entity.service}, total = avg(dt.service.request.response_time, default:0)\n| fieldsAdd tags = entityAttr(dt.entity.service, \"tags\")\n| filter in(tags, \"[Kubernetes]backstage.io/component:default.simplenodeservice-team01-qa\")\n| fieldsAdd high = iCollectArray(if(total[] > 1000 * 500, total[]))\n| fieldsAdd low = iCollectArray(if(total[] <= 1000 * 500, total[]))\n| fieldsAdd highRespTimes = iCollectArray(if(isNull(high[]), 0, else:1))\n| fieldsAdd lowRespTimes = iCollectArray(if(isNull(low[]), 0, else:1))\n| fieldsAdd sli = 100 * (lowRespTimes[] / (lowRespTimes[] + highRespTimes[]))\n| fieldsRemove total, high, low, highRespTimes, lowRespTimes\n| summarize sli = avg(arrayAvg(sli))",
                                "timezone": "America/Chicago",
                                "query": "timeseries total=avg(dt.service.request.response_time, default: 0), by: { dt.entity.service }\n| fieldsAdd tags = entityAttr(dt.entity.service,\"tags\")\n| filter in(tags,\"[Kubernetes]backstage.io/component:default.simplenodeservice-team01-qa\")\n| fieldsAdd high=iCollectArray(if(total[]> (1000 * 500), total[]))\n| fieldsAdd low=iCollectArray(if(total[]<= (1000 * 500), total[]))\n| fieldsAdd highRespTimes=iCollectArray(if(isNull(high[]),0,else:1))\n| fieldsAdd lowRespTimes=iCollectArray(if(isNull(low[]),0,else:1))\n| fieldsAdd sli=100*(lowRespTimes[]/(lowRespTimes[]+highRespTimes[]))\n| fieldsRemove total, high, low, highRespTimes, lowRespTimes\n| summarize sli = avg(arrayAvg(sli))",
                                "scannedRecords": 3,
                                "dqlVersion": "V1_0",
                                "scannedBytes": 0,
                                "scannedDataPoints": 31,
                                "analysisTimeframe": {
                                    "start": "2024-12-09T00:46:00.000Z",
                                    "end": "2024-12-09T01:17:00.000Z"
                                },
                                "locale": "en-US",
                                "executionTimeMilliseconds": 71,
                                "notifications": [],
                                "queryId": "f26f178f-c9e6-47d6-94b2-818cc29a4498",
                                "sampled": false
                            },
                            "metrics": [
                                {
                                    "metric.key": "dt.service.request.response_time",
                                    "fieldName": "total"
                                }
                            ]
                        },
                        "types": [
                            {
                                "mappings": {
                                    "sli": {
                                        "type": "double"
                                    }
                                },
                                "indexRange": [
                                    0,
                                    0
                                ]
                            }
                        ]
                    },
                    "notifications": [],
                    "querySettings": {
                        "maxResultRecords": 1000,
                        "defaultScanLimitGbytes": 500,
                        "maxResultMegaBytes": 1,
                        "defaultSamplingRatio": 10,
                        "enableSampling": false
                    },
                    "dateTime": "2024-12-09T01:16:24.692Z",
                    "input": {
                        "timeframe": {
                            "from": "now()-30m",
                            "to": "now()"
                        },
                        "value": "timeseries total=avg(dt.service.request.response_time, default: 0), by: { dt.entity.service }\n| fieldsAdd tags = entityAttr(dt.entity.service,\"tags\")\n| filter in(tags,\"[Kubernetes]backstage.io/component:default.simplenodeservice-team01-qa\")\n| fieldsAdd high=iCollectArray(if(total[]> (1000 * 500), total[]))\n| fieldsAdd low=iCollectArray(if(total[]<= (1000 * 500), total[]))\n| fieldsAdd highRespTimes=iCollectArray(if(isNull(high[]),0,else:1))\n| fieldsAdd lowRespTimes=iCollectArray(if(isNull(low[]),0,else:1))\n| fieldsAdd sli=100*(lowRespTimes[]/(lowRespTimes[]+highRespTimes[]))\n| fieldsRemove total, high, low, highRespTimes, lowRespTimes\n| summarize sli = avg(arrayAvg(sli))"
                    }
                },
                "visualizationSettings": {
                    "thresholds": [],
                    "chartSettings": {
                        "gapPolicy": "gap",
                        "circleChartSettings": {
                            "groupingThresholdType": "relative",
                            "groupingThresholdValue": 0,
                            "valueType": "relative"
                        },
                        "categoryOverrides": {},
                        "curve": "linear",
                        "pointsDisplay": "auto",
                        "categoricalBarChartSettings": {
                            "layout": "horizontal",
                            "categoryAxisTickLayout": "horizontal",
                            "scale": "absolute",
                            "groupMode": "stacked",
                            "colorPaletteMode": "multi-color"
                        },
                        "colorPalette": "categorical",
                        "valueRepresentation": "absolute",
                        "truncationMode": "middle"
                    },
                    "singleValue": {
                        "showLabel": true,
                        "label": "sli",
                        "prefixIcon": "",
                        "recordField": "sli",
                        "autoscale": true,
                        "alignment": "center",
                        "trend": {
                            "trendType": "auto",
                            "isVisible": true
                        },
                        "colorThresholdTarget": "value"
                    },
                    "table": {
                        "rowDensity": "condensed",
                        "enableSparklines": false,
                        "hiddenColumns": [],
                        "linewrapEnabled": false,
                        "lineWrapIds": [],
                        "monospacedFontEnabled": false,
                        "monospacedFontColumns": [],
                        "firstVisibleRowIndex": 0,
                        "columnWidths": {},
                        "columnTypeOverrides": []
                    },
                    "honeycomb": {
                        "shape": "hexagon",
                        "legend": {
                            "hidden": false,
                            "position": "auto"
                        },
                        "displayedFields": [],
                        "dataMappings": {},
                        "truncationMode": "middle",
                        "colorMode": "color-palette",
                        "colorPalette": "categorical"
                    },
                    "histogram": {
                        "legend": "auto",
                        "yAxis": {
                            "label": "Frequency",
                            "scale": "linear"
                        },
                        "colorPalette": "categorical",
                        "dataMappings": [
                            {
                                "valueAxis": "sli",
                                "rangeAxis": ""
                            }
                        ],
                        "variant": "single",
                        "truncationMode": "middle",
                        "displayedFields": []
                    },
                    "autoSelectVisualization": false
                },
                "state": "success"
            }
        },
        {
            "id": "da2dc654-d803-4e17-8730-6b715f65bf08",
            "type": "dql",
            "title": "service availability",
            "filterSegments": [],
            "drilldownPath": [],
            "previousFilterSegments": [],
            "height": 261,
            "state": {
                "input": {
                    "value": "timeseries { total=sum(dt.service.request.count, default: 0) ,failures=sum(dt.service.request.failure_count, default: 0) }, by: { dt.entity.service }, filter: { k8s.namespace.name == \"$proj_name-$owner-$stage\" }\n| fieldsAdd sli=(((total[]-failures[])/total[])*(100))\n| fieldsRemove total, failures\n| summarize sli = avg(arrayAvg(sli))",
                    "timeframe": {
                        "from": "now()-30m",
                        "to": "now()"
                    }
                },
                "visualization": "singleValue",
                "querySettings": {
                    "maxResultRecords": 1000,
                    "defaultScanLimitGbytes": 500,
                    "maxResultMegaBytes": 1,
                    "defaultSamplingRatio": 10,
                    "enableSampling": false
                },
                "result": {
                    "code": 200,
                    "value": {
                        "records": [
                            {
                                "sli": 100
                            }
                        ],
                        "metadata": {
                            "grail": {
                                "canonicalQuery": "timeseries by:{dt.entity.service}, {total = sum(dt.service.request.count, default:0), failures = sum(dt.service.request.failure_count, default:0)}\n| fieldsAdd tags = entityAttr(dt.entity.service, \"tags\")\n| filter in(tags, \"[Kubernetes]backstage.io/component:default.simplenodeservice-team01-qa\")\n| fieldsAdd sli = (total[] - failures[]) / total[] * 100\n| fieldsRemove total, failures\n| summarize sli = avg(arrayAvg(sli))",
                                "timezone": "America/Chicago",
                                "query": "timeseries { total=sum(dt.service.request.count, default: 0) ,failures=sum(dt.service.request.failure_count, default: 0) }, by: { dt.entity.service }\n| fieldsAdd tags = entityAttr(dt.entity.service,\"tags\")\n| filter in(tags,\"[Kubernetes]backstage.io/component:default.simplenodeservice-team01-qa\")\n| fieldsAdd sli=(((total[]-failures[])/total[])*(100))\n| fieldsRemove total, failures\n| summarize sli = avg(arrayAvg(sli))",
                                "scannedRecords": 3,
                                "dqlVersion": "V1_0",
                                "scannedBytes": 0,
                                "scannedDataPoints": 62,
                                "analysisTimeframe": {
                                    "start": "2024-12-09T00:48:00.000Z",
                                    "end": "2024-12-09T01:19:00.000Z"
                                },
                                "locale": "en-US",
                                "executionTimeMilliseconds": 80,
                                "notifications": [],
                                "queryId": "73e1a6a6-25ad-4ab3-8516-adcfee815f6c",
                                "sampled": false
                            },
                            "metrics": [
                                {
                                    "metric.key": "dt.service.request.count",
                                    "fieldName": "total"
                                },
                                {
                                    "metric.key": "dt.service.request.failure_count",
                                    "fieldName": "failures"
                                }
                            ]
                        },
                        "types": [
                            {
                                "mappings": {
                                    "sli": {
                                        "type": "double"
                                    }
                                },
                                "indexRange": [
                                    0,
                                    0
                                ]
                            }
                        ]
                    },
                    "notifications": [],
                    "querySettings": {
                        "maxResultRecords": 1000,
                        "defaultScanLimitGbytes": 500,
                        "maxResultMegaBytes": 1,
                        "defaultSamplingRatio": 10,
                        "enableSampling": false
                    },
                    "dateTime": "2024-12-09T01:18:54.269Z",
                    "input": {
                        "timeframe": {
                            "from": "now()-30m",
                            "to": "now()"
                        },
                        "value": "timeseries { total=sum(dt.service.request.count, default: 0) ,failures=sum(dt.service.request.failure_count, default: 0) }, by: { dt.entity.service }\n| fieldsAdd tags = entityAttr(dt.entity.service,\"tags\")\n| filter in(tags,\"[Kubernetes]backstage.io/component:default.simplenodeservice-team01-qa\")\n| fieldsAdd sli=(((total[]-failures[])/total[])*(100))\n| fieldsRemove total, failures\n| summarize sli = avg(arrayAvg(sli))"
                    }
                },
                "visualizationSettings": {
                    "thresholds": [],
                    "chartSettings": {
                        "gapPolicy": "gap",
                        "circleChartSettings": {
                            "groupingThresholdType": "relative",
                            "groupingThresholdValue": 0,
                            "valueType": "relative"
                        },
                        "categoryOverrides": {},
                        "curve": "linear",
                        "pointsDisplay": "auto",
                        "categoricalBarChartSettings": {
                            "layout": "horizontal",
                            "categoryAxisTickLayout": "horizontal",
                            "scale": "absolute",
                            "groupMode": "stacked",
                            "colorPaletteMode": "multi-color"
                        },
                        "colorPalette": "categorical",
                        "valueRepresentation": "absolute",
                        "truncationMode": "middle"
                    },
                    "singleValue": {
                        "showLabel": true,
                        "label": "sli",
                        "prefixIcon": "",
                        "recordField": "sli",
                        "autoscale": true,
                        "alignment": "center",
                        "trend": {
                            "trendType": "auto",
                            "isVisible": true
                        },
                        "colorThresholdTarget": "value"
                    },
                    "table": {
                        "rowDensity": "condensed",
                        "enableSparklines": false,
                        "hiddenColumns": [],
                        "linewrapEnabled": false,
                        "lineWrapIds": [],
                        "monospacedFontEnabled": false,
                        "monospacedFontColumns": [],
                        "firstVisibleRowIndex": 0,
                        "columnWidths": {},
                        "columnTypeOverrides": []
                    },
                    "honeycomb": {
                        "shape": "hexagon",
                        "legend": {
                            "hidden": false,
                            "position": "auto"
                        },
                        "displayedFields": [],
                        "dataMappings": {},
                        "truncationMode": "middle",
                        "colorMode": "color-palette",
                        "colorPalette": "categorical"
                    },
                    "histogram": {
                        "legend": "auto",
                        "yAxis": {
                            "label": "Frequency",
                            "scale": "linear"
                        },
                        "colorPalette": "categorical",
                        "dataMappings": [
                            {
                                "valueAxis": "sli",
                                "rangeAxis": ""
                            }
                        ],
                        "variant": "single",
                        "truncationMode": "middle",
                        "displayedFields": []
                    },
                    "autoSelectVisualization": false
                },
                "state": "success"
            }
        },
        {
            "id": "dcc58f97-b612-4265-b420-5097fbd7a1c4",
            "type": "dql",
            "title": "container logs",
            "filterSegments": [],
            "drilldownPath": [],
            "previousFilterSegments": [],
            "height": 274,
            "state": {
                "input": {
                    "value": "fetch logs\n| filter k8s.namespace.name == \"$proj_name-$owner-$stage\" and k8s.container.name == \"rollouts-demo\"\n| makeTimeseries {non_info = countIf(in(status,{\"ERROR\",\"WARN\"}), default:0)}\n| fieldsAdd sli = if(non_info[] != 0, 0, else: 1)\n| fieldsAdd sli = (sli[] / 1) * 100\n| fieldsRemove non_info\n| summarize sli = avg(arrayAvg(sli))",
                    "timeframe": {
                        "from": "now()-1h",
                        "to": "now()"
                    }
                },
                "visualization": "singleValue",
                "querySettings": {
                    "maxResultRecords": 1000,
                    "defaultScanLimitGbytes": 500,
                    "maxResultMegaBytes": 1,
                    "defaultSamplingRatio": 10,
                    "enableSampling": false
                },
                "result": {
                    "code": 200,
                    "value": {
                        "records": [
                            {
                                "sli": 100
                            }
                        ],
                        "metadata": {
                            "grail": {
                                "canonicalQuery": "fetch logs\n| filter k8s.namespace.name == \"simplenodeservice-team01-qa\" AND k8s.container.name == \"rollouts-demo\"\n| makeTimeseries non_info = countIf(in(status, {\"ERROR\", \"WARN\"}), default:0)\n| fieldsAdd sli = if(non_info[] != 0, 0, else:1)\n| fieldsAdd sli = sli[] / 1 * 100\n| fieldsRemove non_info\n| summarize sli = avg(arrayAvg(sli))",
                                "timezone": "America/Chicago",
                                "query": "fetch logs\n| filter k8s.namespace.name == \"simplenodeservice-team01-qa\" and k8s.container.name == \"rollouts-demo\"\n| makeTimeseries {non_info = countIf(in(status,{\"ERROR\",\"WARN\"}), default:0)}\n| fieldsAdd sli = if(non_info[] != 0, 0, else: 1)\n| fieldsAdd sli = (sli[] / 1) * 100\n| fieldsRemove non_info\n| summarize sli = avg(arrayAvg(sli))",
                                "scannedRecords": 423399,
                                "dqlVersion": "V1_0",
                                "scannedBytes": 13236441,
                                "scannedDataPoints": 0,
                                "analysisTimeframe": {
                                    "start": "2024-12-09T21:12:11.843Z",
                                    "end": "2024-12-09T22:12:11.843Z"
                                },
                                "locale": "en-US",
                                "executionTimeMilliseconds": 32,
                                "notifications": [],
                                "queryId": "da0b72e0-0d54-442a-b270-d99e516cb5b1",
                                "sampled": false
                            }
                        },
                        "types": [
                            {
                                "mappings": {
                                    "sli": {
                                        "type": "double"
                                    }
                                },
                                "indexRange": [
                                    0,
                                    0
                                ]
                            }
                        ]
                    },
                    "notifications": [],
                    "querySettings": {
                        "maxResultRecords": 1000,
                        "defaultScanLimitGbytes": 500,
                        "maxResultMegaBytes": 1,
                        "defaultSamplingRatio": 10,
                        "enableSampling": false
                    },
                    "dateTime": "2024-12-09T22:12:12.183Z",
                    "input": {
                        "timeframe": {
                            "from": "now()-1h",
                            "to": "now()"
                        },
                        "value": "fetch logs\n| filter k8s.namespace.name == \"simplenodeservice-team01-qa\" and k8s.container.name == \"rollouts-demo\"\n| makeTimeseries {non_info = countIf(in(status,{\"ERROR\",\"WARN\"}), default:0)}\n| fieldsAdd sli = if(non_info[] != 0, 0, else: 1)\n| fieldsAdd sli = (sli[] / 1) * 100\n| fieldsRemove non_info\n| summarize sli = avg(arrayAvg(sli))"
                    }
                },
                "visualizationSettings": {
                    "thresholds": [],
                    "chartSettings": {
                        "gapPolicy": "gap",
                        "circleChartSettings": {
                            "groupingThresholdType": "relative",
                            "groupingThresholdValue": 0,
                            "valueType": "relative"
                        },
                        "categoryOverrides": {},
                        "curve": "linear",
                        "pointsDisplay": "auto",
                        "categoricalBarChartSettings": {
                            "layout": "horizontal",
                            "categoryAxisTickLayout": "horizontal",
                            "scale": "absolute",
                            "groupMode": "stacked",
                            "colorPaletteMode": "multi-color"
                        },
                        "colorPalette": "categorical",
                        "valueRepresentation": "absolute",
                        "truncationMode": "middle"
                    },
                    "singleValue": {
                        "showLabel": true,
                        "label": "sli",
                        "prefixIcon": "",
                        "recordField": "sli",
                        "autoscale": true,
                        "alignment": "center",
                        "trend": {
                            "trendType": "auto",
                            "isVisible": true
                        },
                        "colorThresholdTarget": "value"
                    },
                    "table": {
                        "rowDensity": "condensed",
                        "enableSparklines": false,
                        "hiddenColumns": [],
                        "linewrapEnabled": false,
                        "lineWrapIds": [],
                        "monospacedFontEnabled": false,
                        "monospacedFontColumns": [],
                        "firstVisibleRowIndex": 0,
                        "columnWidths": {},
                        "columnTypeOverrides": []
                    },
                    "honeycomb": {
                        "shape": "hexagon",
                        "legend": {
                            "hidden": false,
                            "position": "auto"
                        },
                        "displayedFields": [],
                        "dataMappings": {},
                        "truncationMode": "middle",
                        "colorMode": "color-palette",
                        "colorPalette": "categorical"
                    },
                    "histogram": {
                        "legend": "auto",
                        "yAxis": {
                            "label": "Frequency",
                            "scale": "linear"
                        },
                        "colorPalette": "categorical",
                        "dataMappings": [
                            {
                                "valueAxis": "sli",
                                "rangeAxis": ""
                            }
                        ],
                        "variant": "single",
                        "truncationMode": "middle",
                        "displayedFields": []
                    },
                    "autoSelectVisualization": false
                },
                "state": "success"
            }
        },
        {
            "id": "58f7c8d1-1591-45e9-a1e8-49cac82a390d",
            "type": "dql",
            "title": "service throughput",
            "filterSegments": [],
            "drilldownPath": [],
            "previousFilterSegments": [],
            "height": 257,
            "state": {
                "input": {
                    "value": "timeseries {count = sum(dt.service.request.count, default: 0)}, by: {dt.entity.service}, filter: { k8s.namespace.name == \"$proj_name-$owner-$stage\" }\n| fieldsAdd traffic = if(count[] == 0, 0, else: 1)\n| fieldsAdd sli = (traffic[] / 1) * 100\n| fieldsRemove traffic, count\n| summarize sli = avg(arrayAvg(sli))",
                    "timeframe": {
                        "from": "now()-30m",
                        "to": "now()"
                    }
                },
                "visualization": "singleValue",
                "querySettings": {
                    "maxResultRecords": 1000,
                    "defaultScanLimitGbytes": 500,
                    "maxResultMegaBytes": 1,
                    "defaultSamplingRatio": 10,
                    "enableSampling": false
                },
                "result": {
                    "code": 200,
                    "value": {
                        "records": [
                            {
                                "sli": 70.96774193548387
                            }
                        ],
                        "metadata": {
                            "grail": {
                                "canonicalQuery": "timeseries by:{dt.entity.service}, count = sum(dt.service.request.count, default:0)\n| fieldsAdd tags = entityAttr(dt.entity.service, \"tags\")\n| filter in(tags, \"[Kubernetes]backstage.io/component:default.simplenodeservice-team01-qa\")\n| fieldsAdd traffic = if(count[] == 0, 0, else:1)\n| fieldsAdd sli = traffic[] / 1 * 100\n| fieldsRemove traffic, count\n| summarize sli = avg(arrayAvg(sli))",
                                "timezone": "America/Chicago",
                                "query": "timeseries {count = sum(dt.service.request.count, default: 0)}, by: {dt.entity.service}\n| fieldsAdd tags = entityAttr(dt.entity.service,\"tags\")\n| filter in(tags,\"[Kubernetes]backstage.io/component:default.simplenodeservice-team01-qa\")\n| fieldsAdd traffic = if(count[] == 0, 0, else: 1)\n| fieldsAdd sli = (traffic[] / 1) * 100\n| fieldsRemove traffic, count\n| summarize sli = avg(arrayAvg(sli))",
                                "scannedRecords": 3,
                                "dqlVersion": "V1_0",
                                "scannedBytes": 0,
                                "scannedDataPoints": 31,
                                "analysisTimeframe": {
                                    "start": "2024-12-09T00:44:00.000Z",
                                    "end": "2024-12-09T01:15:00.000Z"
                                },
                                "locale": "en-US",
                                "executionTimeMilliseconds": 64,
                                "notifications": [],
                                "queryId": "0e1d908d-b065-4fba-acb5-b6d2e606b1b0",
                                "sampled": false
                            },
                            "metrics": [
                                {
                                    "metric.key": "dt.service.request.count",
                                    "fieldName": "count"
                                }
                            ]
                        },
                        "types": [
                            {
                                "mappings": {
                                    "sli": {
                                        "type": "double"
                                    }
                                },
                                "indexRange": [
                                    0,
                                    0
                                ]
                            }
                        ]
                    },
                    "notifications": [],
                    "querySettings": {
                        "maxResultRecords": 1000,
                        "defaultScanLimitGbytes": 500,
                        "maxResultMegaBytes": 1,
                        "defaultSamplingRatio": 10,
                        "enableSampling": false
                    },
                    "dateTime": "2024-12-09T01:14:58.310Z",
                    "input": {
                        "timeframe": {
                            "from": "now()-30m",
                            "to": "now()"
                        },
                        "value": "timeseries {count = sum(dt.service.request.count, default: 0)}, by: {dt.entity.service}\n| fieldsAdd tags = entityAttr(dt.entity.service,\"tags\")\n| filter in(tags,\"[Kubernetes]backstage.io/component:default.simplenodeservice-team01-qa\")\n| fieldsAdd traffic = if(count[] == 0, 0, else: 1)\n| fieldsAdd sli = (traffic[] / 1) * 100\n| fieldsRemove traffic, count\n| summarize sli = avg(arrayAvg(sli))"
                    }
                },
                "visualizationSettings": {
                    "thresholds": [],
                    "chartSettings": {
                        "gapPolicy": "gap",
                        "circleChartSettings": {
                            "groupingThresholdType": "relative",
                            "groupingThresholdValue": 0,
                            "valueType": "relative"
                        },
                        "categoryOverrides": {},
                        "curve": "linear",
                        "pointsDisplay": "auto",
                        "categoricalBarChartSettings": {
                            "layout": "horizontal",
                            "categoryAxisTickLayout": "horizontal",
                            "scale": "absolute",
                            "groupMode": "stacked",
                            "colorPaletteMode": "multi-color",
                            "categoryAxisLabel": "dt.entity.service",
                            "valueAxisLabel": "interval",
                            "tooltipVariant": "single"
                        },
                        "colorPalette": "categorical",
                        "valueRepresentation": "absolute",
                        "truncationMode": "middle",
                        "xAxisScaling": "analyzedTimeframe",
                        "xAxisLabel": "timeframe",
                        "xAxisIsLabelVisible": false,
                        "hiddenLegendFields": [],
                        "leftYAxisSettings": {}
                    },
                    "singleValue": {
                        "showLabel": true,
                        "label": "sli",
                        "prefixIcon": "",
                        "recordField": "sli",
                        "autoscale": true,
                        "alignment": "center",
                        "trend": {
                            "trendType": "auto",
                            "isVisible": true
                        },
                        "colorThresholdTarget": "value"
                    },
                    "table": {
                        "rowDensity": "condensed",
                        "enableSparklines": false,
                        "hiddenColumns": [],
                        "linewrapEnabled": false,
                        "lineWrapIds": [],
                        "monospacedFontEnabled": false,
                        "monospacedFontColumns": [],
                        "firstVisibleRowIndex": 0,
                        "columnWidths": {},
                        "columnTypeOverrides": []
                    },
                    "honeycomb": {
                        "shape": "hexagon",
                        "legend": {
                            "hidden": false,
                            "position": "auto"
                        },
                        "displayedFields": [],
                        "dataMappings": {},
                        "truncationMode": "middle",
                        "colorMode": "color-palette",
                        "colorPalette": "categorical"
                    },
                    "histogram": {
                        "legend": "auto",
                        "yAxis": {
                            "label": "Frequency",
                            "scale": "linear"
                        },
                        "colorPalette": "categorical",
                        "dataMappings": [
                            {
                                "valueAxis": "sli",
                                "rangeAxis": ""
                            }
                        ],
                        "variant": "single",
                        "truncationMode": "middle",
                        "displayedFields": []
                    },
                    "autoSelectVisualization": false
                },
                "state": "success"
            }
        }
    ]
}
